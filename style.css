/**
 * ═══════════════════════════════════════════════════════════════════
 * WAYBAR STYLE - УНИФИЦИРОВАННАЯ ВЕРСИЯ
 * ════════════════════════════════════════════════════════════════════
 * Описание:
 *   - Унифицированный стиль для всех модулей Waybar
 *   - Группировка цветов, размеров и поведений
 *   - Поддержка мигания для языка RU и модуля записи
 *   - Использование @define-color только для цветов (ограничение GTK)
 *
 * Версия: 1.3
 * Последнее изменение: рефакторинг с @define-color только для цветов
 *
 * Примечание: @define-color работает только для цветов, поэтому размеры и отступы
 * задаются явно, но группируются по назначению
 */

/******************************************************************************/
/**
 * [ГЛОБАЛЬНЫЕ ОПРЕДЕЛЕНИЯ ЦВЕТОВ - @define-color]
 * Все цвета собраны здесь для централизованного управления цветовой схемой
 *
 * ПРИМЕНЕНИЕ:
 * - @define-color используется ТОЛЬКО для цветов (ограничение GTK CSS)
 * - Все модули используют эти переменные для согласованности
 * - Изменение цвета здесь применяется ко всем модулям автоматически
 */

/****************************** СЕМАНТИЧЕСКИЕ ЦВЕТА ******************************/

/* Base - фоновые цвета */
@define-color base-bg rgba(18, 18, 26, 1);
@define-color base-surface rgba(39, 39, 58, 1);
@define-color transparent rgba(0, 0, 0, 0);

/* Text - цвета текста */
@define-color text-primary rgba(153, 209, 219, 1);
@define-color text-secondary rgba(176, 176, 184, 1);
@define-color text-disabled rgba(102, 102, 114, 1);
@define-color text-error rgba(255, 122, 122, 1);
@define-color text-on-accent rgba(245, 248, 250, 0.95);
@define-color text-on-error rgba(255, 255, 255, 0.95);

/* Accent - акцентные цвета для фокуса и активности */
@define-color accent-main rgba(126, 219, 71, 1);
@define-color accent-soft rgba(198, 255, 146, 1);
@define-color accent-peak rgba(0, 255, 0, 1);
@define-color accent-warning rgba(255, 184, 112, 1);
@define-color accent-warning-soft rgba(255, 184, 112, 0.25);

/* State - цвета состояний (success / warning / error) */
@define-color state-success rgba(200, 255, 200, 1);
@define-color state-success-text rgba(150, 224, 150, 1);
@define-color state-warning rgba(255, 216, 168, 1);
@define-color state-warning-text rgba(255, 184, 112, 1);
@define-color state-error rgba(255, 182, 182, 1);

/* Utility - вспомогательные цвета (границы, hover, selection) */
@define-color ui-border rgba(68, 71, 90, 0.4);
@define-color ui-border-focus rgba(126, 219, 71, 1);
@define-color ui-background-focus-20 rgba(126, 219, 71, 0.2);
@define-color ui-hover rgba(68, 71, 90, 0.7);
@define-color ui-selection rgba(68, 71, 90, 1);


/******************************************************************************/
/**
 * [ГЛОБАЛЬНЫЕ СТИЛИ]
 * Применяются ко всей панели Waybar и общим элементам
 */

* {
	font-family: 'FontAwesome', 'Roboto', 'Helvetica', 'Arial', sans-serif;
	min-height: 35px;
	font-size: 16px;
}

/* Фон панели с эффектом матового стекла */
window#waybar {
	background-color: @transparent;
	-gtk-icon-effect: none;
	margin-top: 5px;
	margin-bottom: 5px;
}

/* Стилизация кнопок */
button {
	border-radius: 9px;
	padding: 0 8px;
}

/******************************************************************************/
/**
 * [АНИМАЦИИ]
 * Определения ключевых кадров для анимаций
 */

/* Анимация мигания для критической батареи */
@keyframes blink {
	from {
		opacity: 1;
	}
	to {
		opacity: 0.65;
	}
}

/* Анимация пульсации для русского языка и записи */
@keyframes accent-pulse {
	0% {
		background-color: @accent-main;
	}
	50% {
		background-color: @accent-peak;
	}
	100% {
		background-color: @accent-main;
	}
}

/* Анимация срочных workspace */
@keyframes urgent-pulse {
	from {
		box-shadow: 0 0 0 rgba(255, 184, 112, 0.0);
	}
	to {
		box-shadow: 0 0 10px rgba(255, 184, 112, 0.65);
	}
}

/******************************************************************************/
/**
 * [БФЗОВЫЙ СТИЛЬ МОДУЛЕЙ]
 * Общий стиль для всех модулей Waybar
 * Наследуют базовый стиль .module
 */

.module,
#clock,
#battery,
#cpu,
#memory,
#bluetooth,
#temperature,
#backlight,
#network,
#pulseaudio,
#custom-microphone,
#custom-media,
#tray,
#mode,
#idle_inhibitor,
#scratchpad,
#language,
#keyboard-state,
#custom-recording,
#privacy,
#workspaces button,
#power-profiles-daemon {
    background: @base-surface;
	border-radius: 9px;
	margin: 4px 3px;
	padding: 2px 8px;
	color: @text-primary;
	background-color: @base-surface;
	min-height: 20px;
	min-width: 20px;
	border: 1px solid @ui-border;
	transition: background-color 0.2s ease, border-color 0.2s ease, box-shadow 0.2s ease;
}

/******************************************************************************/
/**
 * [ИНДИВИДУАЛЬНЫЕ СТИЛИ МОДУЛЕЙ]
 * Уникальные настройки для конкретных модулей
 */

/* Часы - увеличенный шрифт */
#clock {
	color: @text-primary;
	font-size: 20px;
	font-weight: bold;
}

/* Bluetooth - использует стандартные цвета, без брендовых оттенков */

/* Температура */
#temperature.critical {
	background-color: @state-error;
	font-size: 20px;
    color: @text-error;
}

/* Яркость */

/* Сеть */
#network {
	color: @text-primary;
}

#network.disconnected {
	color: @text-error;
}

/* Батарея */
#battery {
	padding-right: 15px;
}

#battery.charging,
#battery.plugged {
	color: @accent-soft;
}

#battery.critical:not(.charging) {
	background-color: @state-error;
    color: @text-on-error;
    font-weight: bold;
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.4);
    animation-name: blink;
	animation-duration: 0.5s;
	animation-timing-function: steps(12);
	animation-iteration-count: infinite;
	animation-direction: alternate;
}

/* Профили питания */
#power-profiles-daemon {
	padding-right: 15px;
	color: @state-warning-text;
}

#power-profiles-daemon.performance {
	color: @accent-main;
	background-color: @ui-background-focus-20;
}

#power-profiles-daemon.balanced {
	color: @state-warning-text;
}

#power-profiles-daemon.power-saver {
	color: @accent-soft;
}

/* Звук */
#pulseaudio {
}

#pulseaudio.muted {
	color: @state-error;
}

/* Микрофон */
#custom-microphone {
	padding: 0 12px;
}

#custom-microphone.muted {
	color: @state-error;
}

/* Медиа плеер */
#custom-media {
	color: @text-primary;
	padding: 2px 12px;
	margin: 4px 3px;
}

#custom-media.custom-spotify,
#custom-media.custom-vlc,
#custom-media.custom-firefox {
	background-color: @base-surface;
}

/* Индикатор состояния клавиатуры */
#keyboard-state {
	background: @base-surface;
	color: @text-primary;
	min-width: 30px;
}

#keyboard-state > label {
	padding: 0 5px;
}

#keyboard-state > label.locked {
	background: @ui-hover;
}

/* Язык раскладки */
#language {
	font-weight: bold;
	font-size: 20px;
}

/* Русский язык - мигает как запись */
#language.ru {
	background-color: @accent-main;
	border: 2px solid @accent-peak;
	color: @text-on-accent;
	font-weight: bold;
	text-shadow: 0 1px 2px rgba(0, 0, 0, 0.45);
	animation: accent-pulse 1.6s ease-in-out infinite;
}

#language.us {
}

/* Режим Sway */
#mode {
	background-color: @base-surface;
}

/* Scratchpad */
#scratchpad {
	background: @ui-hover;
}

#scratchpad.empty {
	background-color: rgba(0, 0, 0, 0);
}

/* Ингибитор блокировки экрана */
#idle_inhibitor {
	background-color: @base-surface;
}

#idle_inhibitor.activated {
	background-color: @text-primary;
	color: @base-surface;
}

/* Трей (иконки в системном лотке) */
#tray {
}

#tray > .passive {
	-gtk-icon-effect: dim;
}

#tray > .needs-attention {
	-gtk-icon-effect: highlight;
	background-color: @state-error;
}

/* Индикатор записи - мигает как русский язык */
#custom-recording {
	background: @accent-main;
	border: 2px solid @accent-peak;
	color: @text-on-accent;
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.45);
	font-weight: bold;
	padding: 2px 12px;
	min-height: 24px;
	min-width: 24px;
	animation: accent-pulse 1.6s ease-in-out infinite;
}

/* Privacy индикаторы */
#privacy {
	padding: 0;
}

#privacy-item {
	padding: 0 5px;
	color: @text-primary;
	border-radius: 9px;
	margin: 2px;
}

#privacy-item.screenshare {
	background-color: @state-warning;
}

#privacy-item.audio-in {
	background-color: @state-success;
}

#privacy-item.audio-out {
	background-color: @accent-main;
}

/******************************************************************************/
/**
 * [WORKSPACES - РАБОЧИЕ ПРОСТРАНСТВА]
 * Стилизация кнопок переключения рабочих пространств
 */

#workspaces {
    background: @transparent;
    border: 0px;
    padding: 0px 0px;
}

#workspaces button {
	margin: 0 3px;
	transition: background-color 0.2s ease, border-color 0.2s ease, color 0.2s ease;
}

#workspaces button:first-child {
	margin-left: 0;
}

#workspaces button:last-child {
	margin-right: 0;
}

#workspaces button:hover {
	background: @ui-hover;
	border-color: @accent-soft;
}

#workspaces button.focused {
	border: 1px solid @ui-border-focus;
	background: @ui-background-focus-20;
	min-height: 24px;
}

#workspaces button.focused.empty {
	color: @text-secondary;
}

#workspaces button:not(.focused):not(.empty) {
	color: @text-primary;
}

#workspaces button.empty:not(.focused) {
	color: @text-disabled;
}

#workspaces button.empty:hover {
	background: @ui-hover;
}

#workspaces button.urgent {
	background-color: @base-surface;
	color: @text-on-accent;
	font-weight: 700;
	border: 1px solid @accent-warning;
	text-shadow: 0 1px 2px rgba(0, 0, 0, 0.45);
	animation: urgent-pulse 1.4s ease-in-out infinite alternate;
}

/******************************************************************************/
/**
 * [HOVER ЭФФЕКТЫ]
 * Общие стили при наведении курсора на модули
 */

#clock:hover,
#battery:hover,
#cpu:hover,
#memory:hover,
#bluetooth:hover,
#temperature:hover,
#backlight:hover,
#network:hover,
#pulseaudio:hover,
#custom-microphone:hover,
#custom-media:hover,
#power-profiles-daemon:hover,
#keyboard-state:hover,
#custom-recording:hover,
#language:hover {
	background-color: @ui-hover;
	border-color: @accent-soft;
}

/******************************************************************************/
/**
 * [TOOLTIP - ВСПЛЫВАЮЩИЕ ПОДСКАЗКИ]
 * Стилизация всплывающих подсказок при наведении
 */

tooltip {
	border-radius: 9px;
	background-color: @base-surface;
	padding: 12px 16px;
	font-size: 16px;
	border: 1px solid @accent-soft;
	color: @text-primary;
}

tooltip label {
	padding: 5px;
	color: @text-primary;
}

label:focus {
	background-color: @ui-hover;
}
